<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <title>{% block title %}My Hive App{% endblock %}</title>

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    {% block extra_head %}{% endblock %}
</head>
<body class="bg-light">

<style>
  /* Default light text color */
  .navbar-dark .nav-link {
    color: #f8f9fa; /* Light gray or white */
  }

  /* Change color on hover */
  .navbar-dark .nav-link:hover {
    color: #fdd835 !important; /* Yellow shade */
  }
</style>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-4">
  <div class="container">
    <a class="navbar-brand text-light" href="/">üêù Hiverr</a>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Dashboard</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/apiaries">Manage Apiaries</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/hives">Manage Hives</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/queens">Manage Queens</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


<div class="container">
    {% block content %}
    {% endblock %}
</div>

<!-- Toast Container -->
<div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
  <div id="toastMessage" class="toast align-items-center text-bg-success border-0" role="alert" aria-live="assertive" aria-atomic="true">
      <div class="d-flex">
          <div class="toast-body">
              <span id="toastText">Success!</span>
          </div>
          <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
      </div>
  </div>
</div>

{% set flashed_messages = get_flashed_messages(with_categories=true) %}
{% if flashed_messages %}
  <script>
    window.addEventListener('DOMContentLoaded', (event) => {
      {% for category, message in flashed_messages %}
        showToast("{{ message }}", "{{ category }}");
      {% endfor %}
    });
  </script>
{% endif %}

<script>
// Function to trigger a toast
function showToast(message, type='success') {
  var toast = document.getElementById('toastMessage');
  var toastText = document.getElementById('toastText');

  // Set message and color
  toastText.textContent = message;
  toast.className = 'toast align-items-center text-bg-' + type + ' border-0';

  var bsToast = new bootstrap.Toast(toast);
  bsToast.show();
}
</script>

<script>
  setTimeout(function() {
    var alerts = document.querySelectorAll('.alert');
    alerts.forEach(function(alert) {
      alert.classList.remove('show');
      setTimeout(function() {
        var bsAlert = bootstrap.Alert.getOrCreateInstance(alert);
        bsAlert.close();
      }, 150); // wait for fade-out animation
    });
  }, 5000);
</script>

<!-- Bootstrap 5 JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

{% block extra_js %}{% endblock %}
</body>
</html>
