{% extends "base.html" %}

{% block title %}Home - Hiverr{% endblock %}

{% block content %}
<h1 class="mb-5">Dashboard</h1>

{% if apiaries %}
<div class="accordion" id="apiaryAccordion">
  {% for apiary in apiaries %}
  <div class="accordion-item">
    <h2 class="accordion-header" id="heading{{ apiary.id }}">
      <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ apiary.id }}" aria-expanded="false" aria-controls="collapse{{ apiary.id }}">
        {{ apiary.name }} - {{ apiary.location }}
      </button>
    </h2>
    <div id="collapse{{ apiary.id }}" class="accordion-collapse collapse" aria-labelledby="heading{{ apiary.id }}" data-bs-parent="#apiaryAccordion">
      <div class="accordion-body">
        {% if apiary.hives %}
        <ul class="list-group">
          {% for hive in apiary.hives %}
          <li class="list-group-item">
            <strong>{{ hive.name }}</strong>
            {% if hive.queens %}
                - Queen: {{ hive.queens[0].name }}
            {% else %}
                - No queen
            {% endif %}
          </li>
          {% endfor %}
        </ul>
        {% else %}
            <p>No hives in this apiary.</p>
        {% endif %}
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<p>No apiaries yet. <a href="/add-apiary">Add an apiary</a> to get started.</p>
{% endif %}

<div class="mt-4">
  <a href="/apiaries" class="btn btn-primary">Manage Apiaries</a>
  <a href="/hives" class="btn btn-primary">Manage Hives</a>
  <a href="/queens" class="btn btn-primary">Manage Queens</a>
</div>
{% endblock %}
